---
import { Icon } from "astro-icon/components";
import LanguageSelector from "./LanguageSelector.astro";
const classLiIcon =
    "flex justify-center items-center text-lg rounded-full p-1 border border-black dark:border-primary-dark-gray hover:dark:border-primary-dark-orange hover:border-primary-light-blue hover:dark:text-primary-dark-orange hover:text-primary-light-blue transition transition-colors duration-200";
const classLiA =
    "dark:text-primary-dark-gray text-black hover:dark:text-primary-dark-orange hover:text-primary-light-blue transition transition-colors duration-200";
---

<nav class="hidden lg:flex justify-evenly w-full h-16 relative">
    <LanguageSelector />
    <a
        href="/"
        class="logo flex justify-center items-center w-20 h-full dark:bg-primary-dark bg-primary-light dark:before:bg-primary-dark-orange before:bg-primary-light-blue"
    >
        <span
            class="dark:text-white text-black transition-transform duration-200 hover:animate-reflection"
            >DOCPI</span
        >
    </a>
    <ul class="flex justify-between items-center h-full w-44">
        <li><a class:list={[classLiA, 'text-lg']} href="/projects">Proyectos</a></li>
        <li><a class:list={[classLiA, 'text-lg']} href="/about">Sobre mí</a></li>
    </ul>
    <ul class="flex h-full justify-evenly items-center gap-3">
        <li class={classLiIcon}>
            <a href="https://www.linkedin.com/in/camilo-l%C3%B3pez-901099283/"
                ><Icon name="Linkedin" /></a
            >
        </li>
        <li class={classLiIcon}>
            <a href="https://github.com/CamiloLopez15">
                <Icon name="Github" />
            </a>
        </li>
        <li class={classLiIcon}>
            <a href="https://camilolopez15.github.io/"> <Icon name="Worl" /></a>
        </li>
        <li class={classLiIcon}>
            <button data-changeMode-button>
                <Icon name="Moon" />
            </button>
        </li>
    </ul>
</nav>

<nav class="flex lg:hidden justify-evenly w-full h-16 relative">
    <div class="flex justify-between items-center w-full px-4">
        <a
            href="/"
            class="logo flex justify-center items-center w-20 h-full dark:bg-primary-dark bg-primary-light dark:before:bg-primary-dark-orange before:bg-primary-light-blue"
        >
            <span
                class="dark:text-white text-black transition-transform duration-200 hover:animate-reflection"
                >DOCPI</span
            >
        </a>
        <button class="text-3xl" id="MenuOpen" data-openMenu-button>
            <Icon name="MenuOpen" />
        </button>
    </div>
    <div
        class="absolute flex flex-col justify-between z-50 w-full h-[100vh] dark:bg-black bg-white"
        data-menu-div
    >
        <div class="flex justify-end items-center w-full h-20 relative px-3">
            <LanguageSelector />
            <button class="text-3xl" data-closeMenu-button>
                <Icon name="MenuClose" />
            </button>
        </div>
        <ul class="flex flex-col gap-8 justify-center items-center w-full my-10">
            <li><a class:list={[classLiA, 'text-3xl']} href="/projects">Proyectos</a></li>
            <li><a class:list={[classLiA, 'text-3xl']} href="/about">Sobre mí</a></li>
        </ul>
        <ul class="flex border-t-2 items-center justify-center py-5 gap-8">
            <li class={classLiIcon}>
                <a
                    href="https://www.linkedin.com/in/camilo-l%C3%B3pez-901099283/"
                    ><Icon name="Linkedin" /></a
                >
            </li>
            <li class={classLiIcon}>
                <a href="https://github.com/CamiloLopez15">
                    <Icon name="Github" />
                </a>
            </li>
            <li class={classLiIcon}>
                <a href="https://camilolopez15.github.io/">
                    <Icon name="Worl" /></a
                >
            </li>
            <li class={classLiIcon}>
                <button data-changeMode-button>
                    <Icon name="Moon" />
                </button>
            </li>
        </ul>
    </div>
</nav>

<script is:inline lang="ts">
    //Changes thema
    const currentTheme = localStorage.getItem("theme");
    if(currentTheme == 'ligth') document.body.classList.remove('dark')
    const changeModeButton = document.querySelectorAll("[data-changeMode-button]");
    const onChangeMode = () => {
        document.body.classList.toggle("dark");
        if(localStorage.getItem("theme") == 'dark') localStorage.setItem('theme', 'ligth');
        else localStorage.setItem('theme', 'dark')
    };
    changeModeButton.forEach((button) => {
        button.addEventListener("click", onChangeMode);
    })

    //Show responsive menu
    const menuDiv = document.querySelector("[data-menu-div]");
    const openMenuButton = document.querySelector("[data-openMenu-button]");
    const closeMenuButton = document.querySelector("[data-closeMenu-button]");
    openMenuButton.addEventListener("click", () =>
        menuDiv.classList.replace("hidden", "flex")
    );
    closeMenuButton.addEventListener("click", () =>
        menuDiv.classList.replace("flex", "hidden")
    );
</script>

<style>
    .logo::before {
        content: "";
        position: absolute;
        bottom:;
        z-index: 40;
        width: 5rem;
        height: 2rem;
        border-bottom-left-radius: 50%;
        border-bottom-right-radius: 50%;
        margin-top: 6.2rem;
    }
</style>
